<!DOCTYPE html>
<html>
  <head>
    <title>Chapter 10 - HTTP</title>
    <meta charset="utf-8">
  </head>
  <body>

    <!--Fields-->
    <p><input type="text" value="abc"> (text)</p>
    <p><input type="password" value="abc"> (password)</p>
    <p><input type="checkbox" checked> (checkbox)</p>
    <p><input type="radio" value="A" name="choice">
      <input type="radio" value="B" name="choice" checked>
      <input type="radio" value="C" name="choice"> (radio)</p>
    <p><input type="file"> (file)</p>

    <textarea>
    one
    two
    three
    </textarea>

    <select>
      <option>Pancakes</option>
      <option>Pudding</option>
      <option>Ice cream</option>
    </select>



    <!--Focus-->
    <input type="text">
    <script>
      document.querySelector("input").focus();
      console.log(document.activeElement.tagName);
      // → INPUT
      document.querySelector("input").blur();
      console.log(document.activeElement.tagName);
      // → BODY
    </script>

    <input type="text" autofocus>

    <input type="text" tabindex=1> <a href=".">(help)</a>
    <button onclick="console.log('ok')" tabindex=2>OK</button>



    <!--Disabled fields-->
    <button>I'm all right</button>
    <button disabled>I'm out</button>


    <!--The form as a whole-->
    <form action="example/submit.html">
      Name: <input type="text" name="name"><br>
      Password: <input type="password" name="password"><br>
      <button type="submit">Log in</button>
    </form>
    <script>
      var form = document.querySelector("form");
      console.log(form.elements[1].type);
      // → password
      console.log(form.elements.password.type);
      // → password
      console.log(form.elements.name.form == form);
      // → true
    </script>


    <form action="example/submit.html">
      Value: <input type="text" name="value">
      <button type="submit">Save</button>
    </form>
    <script>
      var form = document.querySelector("form");
      form.addEventListener("submit", function(event) {
        console.log("Saving value", form.elements.value.value);
        event.preventDefault();
      });
    </script>



    <!--Text fields-->
    <textarea></textarea>
    <script>
      var textarea = document.querySelector("textarea");
      textarea.addEventListener("keydown", function(event) {
        // The key code for F2 happens to be 113
        if (event.keyCode == 113) {
          replaceSelection(textarea, "Khasekhemwy");
          event.preventDefault();
        }
      });
      function replaceSelection(field, word) {
        var from = field.selectionStart, to = field.selectionEnd;
        field.value = field.value.slice(0, from) + word +
                      field.value.slice(to);
        // Put the cursor after the word
        field.selectionStart = field.selectionEnd =
          from + word.length;
      }
    </script>

    <input type="text"> length: <span id="length">0</span>
    <script>
      var text = document.querySelector("input");
      var output = document.querySelector("#length");
      text.addEventListener("input", function() {
        output.textContent = text.value.length;
      });
    </script>




    <!--Checkboxes and radio buttons-->
    <input type="checkbox" id="purple">
    <label for="purple">Make this page purple</label>
    <script>
      var checkbox = document.querySelector("#purple");
      checkbox.addEventListener("change", function() {
        document.body.style.background =
          checkbox.checked ? "mediumpurple" : "";
      });
    </script>

    <input type="radio" name="color" value="mediumpurple"> Purple
    <input type="radio" name="color" value="lightgreen"> Green
    <input type="radio" name="color" value="lightblue"> Blue
    <script>
      var buttons = document.getElementsByName("color");
      function setColor(event) {
        document.body.style.background = event.target.value;
      }
      for (var i = 0; i < buttons.length; i++)
        buttons[i].addEventListener("change", setColor);
    </script>


    
    
    <!--Select fields-->
    <select multiple>
      <option value="1">0001</option>
      <option value="2">0010</option>
      <option value="4">0100</option>
      <option value="8">1000</option>
    </select> = <span id="output">0</span>
    <script>
      var select = document.querySelector("select");
      var output = document.querySelector("#output");
      select.addEventListener("change", function() {
        var number = 0;
        for (var i = 0; i < select.options.length; i++) {
          var option = select.options[i];
          if (option.selected)
            number += Number(option.value);
        }
        output.textContent = number;
      });
    </script>



    <!--File fields-->
    <input type="file">
    <script>
      var input = document.querySelector("input");
      input.addEventListener("change", function() {
        if (input.files.length > 0) {
          var file = input.files[0];
          console.log("You chose", file.name);
          if (file.type)
            console.log("It has type", file.type);
        }
      });
    </script>

    <input type="file" multiple>
    <script>
      var input = document.querySelector("input");
      input.addEventListener("change", function() {
        Array.prototype.forEach.call(input.files, function(file) {
          var reader = new FileReader();
          reader.addEventListener("load", function() {
            console.log("File", file.name, "starts with",
                        reader.result.slice(0, 20));
          });
          reader.readAsText(file);
        });
      });
    </script>

    <script>
      function readFile(file) {
        return new Promise(function(succeed, fail) {
          var reader = new FileReader();
          reader.addEventListener("load", function() {
            succeed(reader.result);
          });
          reader.addEventListener("error", function() {
            fail(reader.error);
          });
          reader.readAsText(file);
        });
      }
    </script>


    <!--Storing data client-side-->
    <script>
      localStorage.setItem("username", "marijn");
      console.log(localStorage.getItem("username"));
      // → marijn
      localStorage.removeItem("username");
    </script>





    <!--EXAMPLE-->
    Notes: <select id="list"></select>
    <button onclick="addNote()">new</button><br>
    <textarea id="currentnote" style="width: 100%; height: 10em">
    </textarea>

    <script>
      var list = document.querySelector("#list");
      function addToList(name) {
        var option = document.createElement("option");
        option.textContent = name;
        list.appendChild(option);
      }

      // Initialize the list from localStorage
      var notes = JSON.parse(localStorage.getItem("notes")) ||
                  {"shopping list": ""};
      for (var name in notes)
        if (notes.hasOwnProperty(name))
          addToList(name);

      function saveToStorage() {
        localStorage.setItem("notes", JSON.stringify(notes));
      }

      var current = document.querySelector("#currentnote");
      current.value = notes[list.value];

      list.addEventListener("change", function() {
        current.value = notes[list.value];
      });
      current.addEventListener("change", function() {
        notes[list.value] = current.value;
        saveToStorage();
      });

      function addNote() {
        var name = prompt("Note name", "");
        if (!name) return;
        if (!notes.hasOwnProperty(name)) {
          notes[name] = "";
          addToList(name);
          saveToStorage();
        }
        list.value = name;
        current.value = notes[name];
      }
    </script>









    <!--Exersizes-->
    <!--Notes:
    <ul id="notes"></ul>
    <hr>

    <p>Note Title</p>
    <input id="newNote" name="newNote" type="text">
    <br>
    <p>Note Description</p>    
    <textarea name="newNoteDesc" id="newNoteDesc" cols="30" rows="10"></textarea>
    <br>
    <button id="addNewNoteBtn">Add a new note</button>-->
      
    <!--LOAD THE SCRIPTS AT THE END-->
    <!--LOADING SCRIPTS IS SYNCHRONOUS-->
    <script src="notes.js"></script>
  </body>
</html>


