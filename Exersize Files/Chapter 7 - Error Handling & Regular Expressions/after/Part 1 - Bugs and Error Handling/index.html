<!DOCTYPE html>
<html>
  <head>
    <title>Chapter 8 - Bugs and Error Handling</title>
    <script>
        "use strict"


        // Error propagation
        function promptNumber(question) {
            var result = Number(prompt(question, ""));
            if (isNaN(result)) return null;
            else return result;
        }

        console.log(promptNumber("How many trees do you see?"));


        // EXCEPTION HANDLING

        // basic exception handling
        // var x = -1;
        // function get(y) {
        //     if (y > 0) {
        //         return y;
        //     }
        //     throw new Error(y + " is not larger than 0.");
        // }

        // try {
        //     console.log(get(x));
        // } catch (e) {
        //     console.log(e);
        // }


        // function promptDirection(question) {
        //     var result = prompt(question, "");
        //     if (result.toLowerCase() == "left") return "L";
        //     if (result.toLowerCase() == "right") return "R";
        //     throw new Error("Invalid direction: " + result);
        // }

        // function look() {
        //     if (promptDirection("Which way?") == "L")
        //     return "a house";
        //     else
        //     return "two angry bears";
        // }

        // try {
        //     console.log("You see", look());
        // } catch (error) {
        //     console.log("Something went wrong: " + error);
        // }


        // FINALLY
        function withContext(newContext, body) {
          var oldContext = context;
          context = newContext;
          try {
            return body();
          } finally {
            context = oldContext;
          }
        }

        try {
          withContext(5, function() {
            if (context < 10)
              throw new Error("Not enough context!");
          });
        } catch (e) {
          console.log("Ignoring: " + e);
        }
        // → Ignoring: Error: Not enough context!

        console.log(context);
        // → null
        




    
    </script>
  </head>
  <body>
  
  </body>
</html>